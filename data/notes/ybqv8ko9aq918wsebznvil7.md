
# Определение связей и правил преобразования

На данном шаге определяется связь между полями пользовательских структур и полями структур назначения (Полями пакетного ввода, BAPI и др.), а так же правила преобразования. Все поля структур назначения, которые были заполнены на предыдущем шаге, будут отображены на этом экране.

![Определение связей и правил преобразования](assets/images/2022-07-02-12-05-46.png)

### Поля содержат следующую информацию:
* Описание поля
* Присвоенное поле из структуры назначения
* Правило, по которому присваивается значение полю (Константа, пустое, присвоение и т.п.)
* Код программы преобразования

Некоторые поля являются техническими и заполняются системой автоматически, правило для них присваивается как Default Settings (зеленые записи).  Изменение значений данных полей может повлиять на ход выполнения импорта.

Система позволяет автоматически сделать присвоение полей, в случае если их имена совпадают: _Extras -> Auto-field Mapping_.

## Правила присвоения полей

![Правила присвоения полей](assets/images/2022-07-02-12-13-26.png)

* **Initial**: Пустое значение для поля. Когда выбрано данное правило значение поля может принимать  следующие значения: для стандартного пакетного ввода – пустое символьное значение '', для записи пакетного ввода '/', для BAPI или IDoc для символьных полей '', для полей числовых '0..00'.
* **Move**: Работает так же, как и ABAP команда MOVE.
* **Constant**: Значение по умолчанию.
* **Fixed value (reusable)**:  Присваивается значение переменной определенной на шаге Maintain Fixed Values, Translations, User-Defined Routine.
* **Translation (reusable)**: Определяется порядок преобразования поля, само преобразование определяется в шаге Maintain Fixed Values, Translations, User-Defined Routine.
* **User-written routine (reusable)**: Определяется имя кодировки для поля, сама кодировка так же определяется на шаге Maintain Fixed Values, Translations, User-Defined Routine.
* **Prefix**: Задается значение, которое должно быть перед содержимым поля.
* **Suffix**: Задается значение, которое должно быть после содержимого поля.
* **Concatenation**: Вы можете задать объединение двух или нескольких исходных полей в одно поле назначения.
* **Transfer left-justified**: записать содержимое с выравниванием по левому краю.
* **ABAP coding**: задает кодировку ABAP для преобразования поля.  В кодировке можно использовать все поля исходной структуры, глобальные переменные, глобальные функции.
* **XField**: специальная функция для IDocs и BAPI объектов. Функция заполняет так называемые X-структуры (структуры изменений для BAPI функций). В случае если поле было изменено, соответствующее поле X структуры должно иметь значение «Х».